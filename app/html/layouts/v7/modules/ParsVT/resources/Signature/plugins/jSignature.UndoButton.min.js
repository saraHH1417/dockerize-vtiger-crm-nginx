!function(){function t(t){this.events.subscribe("jSignature.attachingEventHandlers",function(){if(this.settings[t]){var n=this.settings[t];"function"!=typeof n&&(n=function(){var t=$('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),n=t.width();return t.css("left",Math.round((this.canvas.width-n)/2)),n!==t.width()&&t.width(n),t}),function(t,n,i){var s=t.call(this);!function(t,n,i){t.events.subscribe(i+".change",function(){t.dataEngine.data.length?n.show():n.hide()})}(this,s,n),function(t,n,i){var s=i+".undo";n.bind("click",function(){t.events.publish(s)}),t.events.subscribe(s,function(){var n=t.dataEngine.data;n.length&&(n.pop(),t.resetCanvas(n))})}(this,s,this.events.topics.hasOwnProperty(n+".undo")?i:n)}.call(this,n,"jSignature",t)}})}$.fn.jSignature("addPlugin","instance","UndoButton",t)}();