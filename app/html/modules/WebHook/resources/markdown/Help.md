## آموزش ماژول وب هوک


![](http://yourcrm.com/modules/WebHook/resources/images/1.png)

<br/>

####مرحله 1:

 از منوی نرم افزار وارد تنظیمات سیستم شوید. ابتدا از قسمت ماژول های فعال بررسی کنید که ماژول وب هوک در لیست ماژول های شما موجود و فعال است و بعد از آن وارد بخش گردش کارهای فعال را شوید. در صورتیکه از پکیج کامل پارس ویتایگر استفاده می کنید نیازی به فعال سازی لایسنس نیست ولی اگر ماژول را بصورت جداگانه خریداری کرده اید حتما باید لایسنس آن را فعال کنید.

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/2.png)

####مرحله 2:

 ماژولی که میخواهید اطلاعات مورد نظر به وب سرویس ارسال شود را انتخاب و یک گردش کار جدید ایجاد کنید. نام گردش کار را وارد و همچنین شرایط مورد نظر را برای انجام گردش کار ایجاد کنید.

<br/>
 
![](http://yourcrm.com/modules/WebHook/resources/images/3.png) 

####مرحله 3:

 از عملیات های گردش کار یک فعالیت جدید از نوع فراخوانی وب سرویس ایجاد کنید.

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/4.png) 

####مرحله 4:

 در پنجره باز شده کلیه تنظیمات مورد نظر نمایش داده می شود. عنوان وظیفه و توضیحات مورد نظر را وارد کنید. 

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/5.png) 

####مرحله 5:

 متد ارسال نحوه ارتباط و ارسال اطلاعات به وب سرویس را مشخص می کند. در صورتی که از وب سرویس SOAP استفاده می کنید باید متد POST را انتخاب کنید. دیگر موارد برای وب سرویس های REST مورد استفاده قرار می گیرد و معمولا در مستندات وب سرویس ها این مورد ذکر می شود.

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/6.png) 

####مرحله 6:

 بعد از انتخاب متد ارسال باید نوع محتوا را انتخاب کنید. در صورتی که متد ارسال POST را انتخاب کرده باشید همه موارد در لیست نوع محتوا برای شما نمایش داده می شود. نوع محتوا با توجه به نوع وب سرویس میتواند متفاوت باشد. برای اطلاع از نوع انتخاب به مستندات وب سرویس مراجعه کنید.

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/7.png) 

####مرحله 7:

 متد احراز هویت در بسیاری از وب سرویس ها وجود دارد که نوع آن نیز در هر وب سرویس میتواند متفاوت باشد. برای مثال در وب سرویس SOAP تنها متد احراز هویت Basic وجود دارد ولی در نوع REST متد های مختلفی وجود دارد. بعد از انتخاب نوع متد احراز هویت فیلد های مربوط به آن متد نیز نمایش داده می شود و می توانید مقادیر آن را وارد کنید.

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/8.png) 

####مرحله 8:

 متد احراز هویت در بعضی از موارد می تواند بصورت توکن باشد که می توانید مانند تصویر بالا اطلاعات آن را به وب سرویس ارسال کنید.

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/9.png) 

####مرحله 9:

 در صورتی که از وب سرویس SOAP استفاده کنید دکمه ای به نام "دریافت لیست توابع صفحه مقصد" نمایش داده می شود که بعد از وارد کردن آدرس وب سرویس (توجه داشته باشید باید آدرس در این نوع وب سرویس به همراه wsdl وارد شود) و زدن این دکمه لیست توابع آن وب سرویس برای شما نمایش داده می شود ولی در وب سرویس نوع REST این دکمه وجود ندارد.

<br/>
 
![](http://yourcrm.com/modules/WebHook/resources/images/10.png) 

####مرحله 10:

 در صورتی که از وب سرویس REST استفاده کنید باید با توجه به مستندات نوع محتوا را انتخاب کنید که معمولا نوع JSON مورد استفاده قرار می گیرد. در این نوع وب سرویس می توانید در صورت وجود SSL آن را فعال کنید.

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/11.png) 

####مرحله 11:

 در صورتی که از وب سرویس SOAP استفاده کنید و دکمه "دریافت لیست توابع صفحه مقصد" را کلیک کنید همه توابع برای شما بارگزاری میشود و میتوانید در قسمت تابع Soap از لیست متد ها یک متد را انتخاب کنید و با زدن دکمه "دریافت پارامترهای تابع" لیست مقادیر آن را در صفحه خود بارگزاری کنید و معادل سازی فیلد های ویتایگر و وب سرویس را انجام دهید. در وب سرویس نوع REST اما این عملیات باید بصورت دستی تنظیم شود.

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/12.png) 

####مرحله 12:

 در صورتی که از وب سرویس REST استفاده کنید با زدن دکمه افزودن فیلد در قسمت تنظیم مقادیر فیلد می توانید معادل سازی را همانند تصویر بالا انجام دهید.

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/13.png) 

####مرحله 13:

 در صورتی که میخواهید مقادیر بازگشتی از وب سرویس را در ویتایگر ذخیره کنید گزینه "بروزرسانی فیلد ها در صورت ارسال موفق" را روی بلی قرار دهید. بعد از این انتخاب، قسمت مربوطه برای شما نمایش داده می شود.

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/14.png) 

####مرحله 14:

 اگر نیاز به ارسال مقادیری در هدر وب سرویس دارید می توانید از قسمت تنظیم مقادیر هدر استفاده کنید. قسمت بروزرسانی فیلد های سی آر ام بعد از انتخاب "بروزرسانی فیلد ها در صورت ارسال موفق" به نمایش در می آید. در مثال بالا جواب وب سرویس در فیلد توضیحات ذخیره می شود.

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/15.png) 

####مرحله 15:

 فعالیت شما آماده شده و میتوانید آن را ذخیره کنید. حال گردش کار شما نیز آماده است آن را ذخیره کنید. بعد از آن می توانید بر اساس شرایط تعریف شده در گردش کار وب هوک خود را آزمایش کنید. بعد از هر بار اجرای وب هوک گزارش آن در تنظیمات ماژول ذخیره می شود.

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/16.png) 

####مرحله 16:

 در بخش تنظیمات دو گزینه وجود دارد. گزینه اول متد ارسال هست که در آن دو انتخاب ارسال خودکار و ارسال فوری وجود دارد. ارسال خودکار  ارتباط با وب سرویس بصورت زمانبندی شده و صف انجام خواهد شد و ارسال فوری در لحظه، ارتباط را برقرار میکند. گزینه دوم امکان اجرای دستی وب هوک های اجرا شده هست و با قرار دادن این گزینه روی بلی این امکان را به شما می دهد که در سربرگ گزارش ها در همین صفحه ارتباط های ایجاد شده را بصورت دستی و با زدن دکمه اجرا انجام دهید.

<br/>
 
 ![](http://yourcrm.com/modules/WebHook/resources/images/17.png) 

<br/>
 
####مرحله 17:

 برای بررسی صحت اطلاعات ارسال و دریافت شده وارد سربرگ گزارش ها در تنظیمات شده و هر رکورد را با توجه به زمان ارسال مشاهده کنید.


<br/>
 