## یکپارچه سازی با مراکز تلفنی

این سرویس یک قابلیت یکپارچه سازی پارس ویتایگر با مراکز تلفنی مختلف را فراهم می کند. از زیر می توانید مراکز تلفنی مورد پشتیبانی را مشاهده نمایید.


###مراکز تلفنی که توسط این سرویس پشتیبانی می شوند

- ####[مرکز تلفنی ویپ بر پایه استریسک از نسخه 1.4 تا 17](#parspbxasterisk)
- ####[مرکز تلفن ویپ سیموتل محصول شرکت نسیم تلکام](#parspbxsimotel)
- ####[مرکز تلفن 3CX نسخه 15 به بالا](#parspbx3cx)
- ####[دستگاه ضبط مکالمات آنالوگ](#parspbxanalog)
- ####[کلیه مراکز تلفن شرکت پاناسونیک](#parspbxpanasonic)
- ####[مرکز تلفن Cisco Call Manager نسخه 6 با بالا ](#parspbxcisco)
- ####[مرکز تلفن آوایا - Avaya ](#parspbxavaya)
- ####[مراکز تلفن زیمنس - Siemens Hipath ](#parspbxsiemens)
- ####[اپلیکیشن CallTracker جهت ردیابی تماس های گوشی های آندروید](#parspbxcalltracker)
- ####[یکپارچه سازی عمومی جهت اتصال سایر سیستم های تلفنی](#parspbxgeneric)


 <br />
<p class="alert alert-warning blink_me">
توجه: <br>اتصال هیچ کدام از سرویس های معرفی شده به صورت رایگان، شامل پلن های پشتیبانی پیش فرض پکیج ها نمی شوند و نصب و راه اندازی انها باید توسط خود مشترک با کمک فایل راهنما و یا پس از پرداخت هزینه های مربوطه توسط تیم پشتیبانی پارس ویتایگر انجام شود.
</p>
 <br />
 
### مرکز تلفنی ویپ بر پایه استریسک<a id='parspbxasterisk'></a>
ماژول Asterisk ویتایگر با یکپارچه سازی سیستم کامپیوتر و تلفن، اطلاعات و گزینه های بیشتری برای تماس های ارسالی یا دریافتی ارائه می دهد و بازده ارتباطات تلفنی شما را افزایش می دهد. این ماژول تجربه کاملاً جدید و مفیدی را در حیطه ارتباطات تلفنی ارائه میدهد و استانداردهای پیشرفته را در فرایندهای کسب و کار شما پیاده سازی می کند.
کلیه تماس های ورودی و خروجی ضبط می شوند و برای هر گونه تحلیل آتی در دسترس می باشند. یکپارچه سازی سیستم تلفنی Asterisk ویتایگر قابلیت های کلیک برای تماس، گزارش های تماس، پاپ آپ ها و پیشینه تماس را ارائه میدهد.
این کانکتور با کلیه نسخه ها و Appliance  های منتشر شده مبتنی بر استریسک 1.4 الی 17 سازگار می باشد
  *  استریسک – Asterisk
  *  الستیکس – Elastix
  *  ایزابل – Issabel
  *  فری پی بی ایکس – FreePBX
  *  Vicidial
  *  Xivo
  *  Fonality
  *  Go auto Dial
  *  Grandstream IPPBX
  *  YEASTAR IPPBX
  *  Integrics / Enswitch
  *  Asterisknow
  *  Switchvox
  *  Zycoo
  *  …
  
برای استفاده از قابلیت های این سرویس بر روی وب سرویس باید این افزونه را به صورت جداگانه از [سایت VTfarsi](http://vtfarsi.ir/product/%d9%85%d8%a7%da%98%d9%88%d9%84-%d8%a7%d8%aa%d8%b5%d8%a7%d9%84-%d9%88%db%8c%d8%aa%d8%a7%db%8c%da%af%d8%b1-%d8%a7%d8%b3%d8%aa%d8%b1%db%8c%d8%b3%da%a9/) تهیه و خریداری نمایید 


### مرکز تلفنی ویپ Simotel<a id='parspbxsimotel'></a>
سیموتل محصول کالسنتر و مرکز تلفن شرکت دانش بنیان نسیم ارتباط آینده است.سیموتل ضمن رعایت استاندارد های جهانی محصولی تماما ایرانی می باشد.در راستای حمایت از محصولات ساخت ایران، 
این افزونه در صورتی که مرکز تلفن خود را از شرکت [نسیم تلکام](https://www.nasimtelecom.com/ip-pbx/) تهیه کرده باشید به صورت رایگان ارائه شده است. 
[برای اطلاعات بیشتر و دسترسی به قسمت تنظیمات و راهنما اینجا را کلیک کنید.](http://yourcrm.com/index.php?module=ParsVT&view=SimotelSettings&parent=Settings)


### مرکز تلفن 3CX نسخه 15 به بالا<a id='parspbx3cx'></a>
[نرم افزار تلفنی 3CX](https://www.3cx.com/) یک سیستم تلفنی تحت شبکه کامل است که امکانات زیادی را در اختیار شما قرار می دهد .
مدیریت آن ساده است و از نظر امنیتی به روزترین و پیشرفته ترین پروتکل های امنیتی در آن وجود دارد . در صورتی که از مرکز تلفن 3CX استفاده می کنید 
این افزونه امکان یکپارچگی و ارتباط با CRM پارس ویتایگر را به صورت رایگان در اختیار شما قرار میدهد. 
تفاوت این نسخه با نسخه پیش فرض  ارائه شده توسط شرکت 3CX برای اتصال به ویتایگر شامل موارد زیر است:
  *  ثبت تاریخچه تماس ها در ماژول مرکز تلفن ویپ در سی آر ام
  *  امکان ایجاد مخاطب و سرنخ به صورت خودکار
  *  امکان تبدیل اسامی فارسی به فینگلیسی به 5 متد مختلف جهت پشتیبانی از آی پی فون هایی که یونیکد پشتیبانی نمی کنند
  *  امکان جستجو در کلیه ماژول هایی که در آنها شماره تلفن ثبت شده است
  *  قابلیت باز کردن صفحه تماس گیرنده در سی آر ام

[برای اطلاعات بیشتر و دسترسی به قسمت تنظیمات و راهنما اینجا را کلیک کنید.](http://yourcrm.com/index.php?module=ParsVT&view=3CX&parent=Settings)


### دستگاه ضبط مکالمات آنالوگ<a id='parspbxanalog'></a>
در راستای افزایش امکانات نرم افزار مدیریت مشتریان پارس ویتایگر در صورتی که مرکز تلفن شما آنالوگ می باشد و از تکنولوژی های جدیدنظیر ویپ استفاده نمی کنید و یا هزینه آنها برای شما زیاد است از این پس می توانید با استفاده توجه به سخت افزار انتخابی خود از قابلیت ضبط مکالمات تلفنی خروجی و ورودی و همچنین پاپ آپ تماس های ورودی بهره مند شوید.
این قابلیت به صورت رایگان ارائه شده است و شما می توانید از سخت افزارهای یکی از شرکت های [ساتل](http://satelco.ir/) ، [تکسا](http://taksaco.org/)، [تلسا](http://www.telsaco.com/) و [اوج سگال](http://www.poscallerid.ir/) استفاده نمایید.
پیش از تهیه سخت افزار از فعال بودن سرویس دهنده سخت افزاری ارائه شده اطمینان حاصل نمایید.

[برای اطلاعات بیشتر و دسترسی به قسمت تنظیمات و راهنمای نصب اینجا را کلیک کنید.](http://yourcrm.com/index.php?module=ParsVT&view=AnalogCTI&parent=Settings)  



### کلیه مراکز تلفنی پاناسونیک<a id='parspbxpanasonic'></a>
ماژول اتصال سانترال پاناسونیک به نرم افزار ویتایگر این امکان را به شما می دهد که مرکز تلفن های TDM و PBX شرکت Panasonic را با نرم افزار CRM ویتایگر یکپارچه کرده و کلیه تماس های ورودی،خروجی و داخلی را در نرم افزار ثبت نماید.
برای استفاده از قابلیت های این سرویس باید این افزونه را به صورت جداگانه از [سایت VTfarsi](http://vtfarsi.ir/product/%d8%a7%d8%aa%d8%b5%d8%a7%d9%84-%d9%88%db%8c%d8%aa%d8%a7%db%8c%da%af%d8%b1-%d8%a8%d8%a7-%d8%b3%d8%a7%d9%86%d8%aa%d8%b1%d8%a7%d9%84/) تهیه و خریداری نمایید 



### مرکز تلفن سیسکو CUCM نسخه 6 به بالا <a id='parspbxcisco'></a>
CUCM که تحت عناوینی چون Call Manger،CCM نیز شناخته می شود، سیستم نرم افزاری است که توسط شرکت سیسکو سیستم، معرفی شده و در واقع مرکز کنترل تمامی ارتباطات و تنظیمات سیستمها و گوشی های VoIP می باشد که تمامی مولفه های شبکه VoIP را که شامل: phones, gateways, conference bridges, Transcoding resources, voicemail boxes می باشد را پشتیبانی می کند.
برای استفاده از قابلیت های این سرویس باید این افزونه را به صورت جداگانه از [سایت VTfarsi](http://vtfarsi.ir/) تهیه و خریداری نمایید 


### مرکز تلفن آوایا - Avaya <a id='parspbxavaya'></a>
آوایا، یک مرکز تلفن طراحی شده برای سازمان های کوچک تا متوسط با راه اندازی، مدیریت و نگهداری آسان می باشد که یکی از برترین و بهترین مراکز تلفن تحت شبکه برای بهبود ساختارهای ارتباطی و تعامل با کارکنان و مشتریان است.
برای استفاده از قابلیت های این سرویس باید این افزونه را به صورت جداگانه از [سایت VTfarsi](http://vtfarsi.ir/) تهیه و خریداری نمایید 



### مراکز تلفن زیمنس - Siemens Hipath <a id='parspbxsiemens'></a>
Siemens Hipath به عنوان یک راهکار برای مراکز تماس کوچک و متوسط  و بزرگ استفاده می شود و قابلیت هایی امکاناتی همچون ارتباط صوتی ، تصویری ، چت و ... را در اختیار کاربر قرار میدهد
برای استفاده از قابلیت های این سرویس در ویتایگر باید این افزونه را به صورت جداگانه از [سایت VTfarsi](http://vtfarsi.ir/) تهیه و خریداری نمایید 




### اپلیکیشن CallTracker جهت ردیابی تماس های گوشی های آندروید<a id='parspbxcalltracker'></a>
[نرم افزار کال ترکر](http://vtfarsi.ir/product/vtiger-android-calltracker/) این قابلیت را به شما می دهد که تماس های ورودی و خروجی که از طریق تلفن همراه می باشد را در پرونده مشتری نرم افزار ویتایگر ثبت نمایید. این قابلیت به صورت رایگان ارائه شده است.
 [برای اطلاعات بیشتر و دسترسی به راهنما و فایل افزونه اینجا را کلیک کنید.](http://vtfarsi.ir/product/vtiger-android-calltracker)

[![Downloads](layouts/v7/modules/ParsVT/images/bazzar.png)](https://cafebazaar.ir/app/com.tcactus.callhistory)
[![Downloads](layouts/v7/modules/ParsVT/images/myket.png)](https://myket.ir/app/com.tcactus.callhistory)


### یکپارچه سازی عمومی جهت اتصال سایر سیستم های تلفنی<a id='parspbxgeneric'></a>
در صورتی که مرکز تلفن مورد نظر شما در لیست مراکز تلفن ویتایگر وجود ندارد وب سرویس جدید پارس ویتایگر شما را قادر می سازد تا به راحتی تماس های مرکز تلفنی خود را با استفاده از پروتکل REST در سیستم ثبت و ردیابی کنید
با استفاده از این API ها می توانید پاپ آپ تماس های ورودی ، وضعیت تماس؛ آدرس فایل ضبط شده مکالمه و ... در سی آر ام ثبت و بروزرسانی نمایید.



####راهنمای یکپارچه سازی عمومی به شرح زیر می باشد:
 <br />
 
<h4 style="color:#3079ed">💡 آدرس وب سرویس عمومی مرکز تلفن</h4>
آدرس وب سرویس یا endpoint برای هر سی آر ام به صورت یک آدرس اختصاصی می باشد

آدرس وب سرویس شما: http://yourcrm.com/modules/ParsVT/ws/API/V2/PBX/Generic

برای استفاده از وب سرویس میتوانید از یکی از متدهای Post یا Get به دلخواه خود استفاده نمایید.
  <br />
 <br />

 
 
 
<h4 style="color:#3079ed">🔑 نحوه احراز هویت</h4>
جهت احراز هویت در این روش باید در همه در خواست ها پارامتری تحت عنوان secretkey با سایر پارامترهای متد انتخابی خود ارسال نمایید.
در این متد نیازی به احراز هویت Basic Authentication وجود ندارد

این پارامتر از قسمت <i>[پیکربندی مرکز تلفن ویپ](http://yourcrm.com/index.php?module=PBXManager&parent=Settings&view=Index)</i> تحت عنوان کلید رمز سی آر ام ویتایگر	 قابل تنظیم و مشاهده
 است.
 <br />
 ```
{
    "secretkey": "String"
}
 ```
 <br />
 <br />

 
  
  
<h4 style="color:#3079ed">📋 متد های قابل استفاده</h4>
برای اتصال به این وب سرویس شما می توانید از 2 متد زیر برای جستجوی شماره تلفن و ثبت رویدادها در مرکز تلفن ویچ استفاده نمایید:

  *  متد SearchPBX جهت جستجوی شماره تلفن
  *  متد ProcessCDR جهت ثبت جزییات تماس
  <br />
 <br />

  
  

<h4 style="color:#3079ed">🔎 لیست پارامتر های متد SearchPBX</h4>

از این متد می توانید برای جستجوی شماره تلفن جهت پاپ آپ کردن تماس در برنامه و مرکز تلفن خود استفاده نمایید
> 📌  متد ارسال درخواست: `POST/GET`

> 💡 سرآیند: `application/x-www-form-urlencoded`

####آدرس درخواست
```
GET endpoint/SearchPBX?secretkey=String&phone=String&finglish=Integer
```

#### پارامترها
```
{
    "secretkey": "String",
    "phone": "Needle Phone Number",
    "finglish": "Integer"
}
```

  پارامتر phone با مقدار شماره ای که در سیستم دنبال آن می گردید مقداردهی می شود
            
پارامتر finglish برای تبدیل اسامی فارسی به فینگلیش استفاده میشود. اهمیت این مورد زمانی که از آی پی فون هایی که زبان فارسی یا یونیکد را پشتیبانی نمی کنند استفاده میکنید نمایان میشود که امکان نمایش نام فارسی را برروی تلفن ندارند. این پارامتر نام مثلا "محمد رضا تقی پور" را به "Mohammad Reza Taghi Pour" تبدیل خواهد کرد.
این پارامتر 6 ورودی می گیرد.

مقدار 0 برای غیرفعال بودن

مقدار 1 برای استفاده از دیکشنری اسامی فارسی که در مسیر modules/ParsVT/resources/finglish/words.json ذخیره شده است و امکان افزودن اسامی بیشتر را دارد

مقدار 2 برای استفاده از مترجم گوگل در برگردان کردن فارسی به فینگلیسی

مقدار 3 برای استفاده از متد تبدیل کاراکترهای فارسی به انگلیسی با ضریب خطای متوسط

مقدار 4 برای استفاده از متد دیکشنری و تبدیل کاراکتر فارسی به انگلیسی

مقدار 5 برای استفاده از همه متدها استفاده می شود

نکته: استفاده از مترجم گوگل ممکن است در صورت کندی سرعت اینترنت باعث ایجاد اختلال در عملکرد سیستم گردد

#### مثال
```
http://yourcrm.com/modules/ParsVT/ws/API/V2/PBX/Generic/SearchPBX?secretkey=26265ed388d733cf7&phone=+989138086200&finglish=5
```

####نتیجه درخواست
```
{
  "result": {
    "id": "2138",
    "name": "پارس ویتایگر",
    "phone": "03136204751",
    "url": "http://yourcrm.com/index.php?module=Contacts&view=Detail&record=2138",
    "module": "Contacts",
    "businessphone": "03191007879",
    "mobile": "09138086200",
    "email": "info@parsvt.com",
    "company": null
  }
}
```

نکته: <i>[اصلاح شماره تلفن ها از بخش تنظیمات قابل پیکربندی می باشد](http://yourcrm.com/index.php?module=ParsVT&view=3CX&parent=Settings)</i>
 <br />
 <br />


<h4 style="color:#3079ed">💾 لیست پارامتر های متد ProcessCDR</h4>


از این متد می توانید برای ثبت رویدادهای مرکز تلفن خود در ماژول مرکز تلفن ویتایگر استفاده نمایید
> 📌  متد ارسال درخواست: `POST/GET`

> 💡 سرآیند: `application/x-www-form-urlencoded`

####آدرس درخواست
```
GET endpoint/ProcessCDR
```

#### پارامترها
```
{
    "secretkey": "String",
    "agent": " Internal Extension Number",
    "phone": "Caller/Callee Phone Number",
    "direction": "Call Direction",
    "event": "Call Event",
    "call_id": "Call Unique ID in your system",
    "duration": "Call Duration",
    "billduration": "Billing Duration",
    "gateway": "Your PBX Applience Name",
    "linename": "PSTN/Trunk Name",
    "recordingurl": "Call Recording File if Exists",
    "starttime": "Call StartTime",
    "endtime": "Call EndTime"
}
```

#### پارامترهای الزامی
  -  secretkey جهت احراز هویت باید در تمامی درخواست های فراخوانی شود
  -  agent شماره داخلی کاربری که تماس گرفته یا تماس با او برقرار شده است
  -  phone شماره تماس مشتری که تماس گرفته یا تماس با او برقرار شده است
  -  call_id شناسه منحصر به فرد تماس در مرکز تلفن شما -  از این شناسه جهت بروزرسانی تماس در صورت تغییر وضعیت تماس استفاده می شود
  -  direction این پارامتر مسیر تماس را به صورت ورودی، خروجی و داخلی مشخص میکند و یکی از مقادیر های زیر را قبول میکند:
     *  inbound یا incoming برای تماس ورودی
     *  outbound یا outgoing برای تماس خروجی
     *  internal برای تماس داخلی 
  -  event نوع رویداد تماس را جهت ذخیره سازی در سی آر ام مشخص میکند و یکی از مقادیر زیر قابل استفاده می باشد:
     *  یکی از مقادیر no_answer/no-answer/no/missed/no-response/notanswered برای ثبت تماس بی پاسخ
     *  یکی از مقادیر ringing/ring جهت ثبت تماس ورودی و ایجاد پاپ آپ تماس
     *  مقدار busy برای مشغول بودن خط
     *  یکی از مقادیر transferred/transfer برای تماس منتقل شده
     *  مقدار in-progress برای تماس های در حال مکالمه
     *  یکی از مقادیر answered/completed/complete/hangup جهت تماس های پایان یافته

  
  
#### پارامترهای اختیاری
  *  duration مدت زمان مکالمه را مشخص می کند و در صورت خالی بودن مقدار 0 میپذیرد
  *  billduration مدت زمان هزینه مکالمه را مشخص می کند و در صورت خالی بودن مقدار duration را میپذیرد
  *  gateway می تواند با نام مرکز تلفن شما جایگزین شود
  *  linename میتواند با نام DID خط ووردی یا پارامترهای دیگر مقدار دهی شود
  *  recordingurl در صورتی که دسترسی به مسیر آنلاین فایل ضبط مکالمه دارید می توانید این فیلد را مقدار دهی کنید تا کاربران بتوانند فایل شما را به صورت آنلاین گوش کنند
  *  starttime تاریخ و زمان شروع مکالمه را به فرمت ISO 8601 می پذیرد و در صورت خالی بودن زمان درخواست را به عنوان زمان شروع در نظر میگیرد
  *  endtime تاریخ و زمان پایان مکالمه را به فرمت ISO 8601 می پذیرد و در صورت خالی بودن زمان شروع به علاوه مدت زمان مکالمه را را به عنوان پایان شروع در نظر میگیرد

#### مثال
```
http://yourcrm.com/modules/ParsVT/ws/API/V2/PBX/Generic/ProcessCDR
```

####نتیجه درخواست
```
{
  "success": true,
  "result": "Id of created/updated record in PBXManager"
}  
```
نکته: <i>[اصلاح شماره تلفن ها از بخش تنظیمات قابل پیکربندی می باشد](http://yourcrm.com/index.php?module=ParsVT&view=Generic&parent=Settings)</i>

 <br />
 <br />
 <h4 style="color:#3079ed">🔗 باز شدن صفحه پاپ آپ توسط سایر برنامه ها</h4>
برای باز کردن صفحه سی آر ام توسط سایر نرم افزارها نظیر ADAT - Asterisk Dialing & Announcement Tool یا UCCX و ... می توانید از لینک زیر استفاده نمایید
برای باز شدن پنجره CRM می توانید پارامتر phone را با مقدار یا متغیر نرم افزار خود جایگزین نمایید
در صورت پیدا کردن شماره رکورد مورد نظر باز خواهد شد و در غیر این صورت شماره مربوطه در کل سیستم جستجو خواهد شد

#### آدرس صفحه برای پاپ آپ
```
YourEndPoint URL/Lookup?phone=requested_phone_number
```
  <br />
  
#### مثال
```
http://yourcrm.com/modules/ParsVT/ws/API/V2/PBX/Asterisk/CTI/Lookup?phone=03191007879
```


  <br />
   <br />
   <h4 style="color:#3079ed">📞 فعال سازی قابلیت ClickToCall</h4>
  برای فعال سازی این قابلیت باید در بخش پیکربندی مرکز تلفن ویپ مقدار آدرس اینترنتی استریسک را با آدرس سرور خود جایگزین نمایید.
  با کلیک بر روی شماره تلفن ها در سی آر ام یک درخواست با متد GET با پارامتر های زیر برای سرور مرکز تلفن شما ارسال خواهد شد. شما باید درخواست ارسالی را پردازش و عملیات لازم را بروی آن انجام دهید
  
  #### آدرس درخواست ارسالی
  
  ```
  YourEndPoint URL/makecall?event=OutgoingCall&secret=vtigersecretkey&from=crm_user_extension&to=callee_number&context=pbxmanager_context
  ```
  
  شرح پارامتر های ارسالی به شرح زیر است:
  
    *  event همیشه ثابت است و با مقدار OutgoingCall ارسال می شود
    *  secret با کلید رمز سی آر ام ویتایگر در ماژول مرکز تلفن مقداردهی میشود
    *  from با شماره داخلی متصل به CRM در پروفایل کاربر جایگزین می شود
    *  to با شماره ای که بر روی آن کلیک شده جایگزین می گردد
    *  context با Context تماس خروجی در تنظیمات مرکز تلفن مقداردهی می گردد
    
 <br />
 <br />
<p class="alert alert-warning blink_me">
توجه: <br>اتصال هیچ کدام از سرویس های معرفی شده به صورت رایگان، شامل پلن های پشتیبانی پیش فرض پکیج ها نمی شوند و نصب و راه اندازی انها باید توسط خود مشترک با کمک فایل راهنما و یا پس از پرداخت هزینه های مربوطه توسط تیم پشتیبانی پارس ویتایگر انجام شود.
</p>
 <br />
 <br />



